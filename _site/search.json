[
  {
    "objectID": "notebooks/highest-grossing-tours-r.html",
    "href": "notebooks/highest-grossing-tours-r.html",
    "title": "",
    "section": "",
    "text": "See R code\n\n\n\n\n\n\n\nHighest-grossing tours of all time visualization\n\n\n\nLet‚Äôs get started by loading the necessary R packages to clean, scrape, and visualize the data. These packages are the building blocks of our data scraping journey.\n\n# To clean data\nlibrary(tidyverse)\nlibrary(janitor)\n\n# To scrape data\nlibrary(rvest)\nlibrary(httr)\nlibrary(polite)\n\n# To visualize data\nlibrary(ggplot2)\nlibrary(showtext)\nlibrary(viridis)\n\nfont_add_google(\"Playfair Display\", \"playfair-display\")\nfont_add_google(\"Lato\", \"lato\")\n\nshowtext::showtext_auto()\n\nNow that we have the necessary libraries loaded, it‚Äôs time to politely scrape data from Wikipedia and bring it into R. We‚Äôll start by specifying the URL of the Wikipedia page we want to extract data from:\n\nurl &lt;-\n  \"https://en.wikipedia.org/wiki/List_of_highest-grossing_concert_tours\"\n\nNext, we‚Äôll use the polite package to create a ‚Äòbag of words‚Äô (bow) representation of the URL. This step helps us make a polite request to the web server for the page‚Äôs content:\n\nurl_bow &lt;- polite::bow(url)\nurl_bow\n\n&lt;polite session&gt; https://en.wikipedia.org/wiki/List_of_highest-grossing_concert_tours\n    User-agent: polite R package\n    robots.txt: 456 rules are defined for 33 bots\n   Crawl delay: 5 sec\n  The path is scrapable for this user-agent\n\n\nOnce we have our ‚Äòbow,‚Äô we can use it to scrape the web page. We‚Äôll specifically target the tables with the class ‚Äòwikitable‚Äô on the page:\n\nind_html &lt;-\n  polite::scrape(url_bow) |&gt;  # scrape web page\n  rvest::html_nodes(\"table.wikitable\") |&gt; # pull out specific table\n  rvest::html_table(fill = TRUE) \n\nFinally, we‚Äôll clean up the extracted table (the second table on the page, Top 20 highest-grossing tours of all time) by storing it in the ind_tab variable and ensuring that column names are in a consistent format:\n\nind_tab &lt;- \n  ind_html[[2]] |&gt; \n  clean_names()\n\nThis code segment efficiently fetches and prepares the data we need from the Wikipedia page. Our next step is to clean it for analysis. In this code snippet, we‚Äôll perform some essential data cleaning tasks to make our dataset ready for exploration: transforming the Adjusted Gross in 2022 Dollars, Actual Gross, and Average Gross columns into numeric variables.\n\nind_tab_clean &lt;-\n  ind_tab |&gt;\n  dplyr::mutate(across(\n    c(adjusted_gross_in_2022_dollars,\n      actual_gross,\n      averagegross),\n    ~ as.numeric(str_replace_all(.x, \"[$,]\", \"\"))\n  ))\n\nWe want to add Taylor‚Äôs data:\n\nind_tab_tay &lt;-\n  ind_tab_clean |&gt; \n  add_row(artist = \"Taylor Swift\",\n          tour_title = \"The Eras Tour (Expected)\",\n          year_s = \"2023-2024\",\n          shows = 146,\n          adjusted_gross_in_2022_dollars = 1400000000,\n          .before = 1)\n\nNow that our data is clean and ready, let‚Äôs visualize the highest-grossing concert tours of all time (as of 2023) using a bar chart. We‚Äôll use the ggplot2 package.\n\nind_tab_tay |&gt;\n  slice(1:10) |&gt; \n  mutate(color = case_when(artist == \"Taylor Swift\" ~ \"#D3ABD0\",\n                           .default = \"#903345\")) |&gt;\n  ggplot(aes(\n    x = forcats::fct_reorder(tour_title,\n                             adjusted_gross_in_2022_dollars),\n    y = adjusted_gross_in_2022_dollars\n  )) +\n  geom_col(aes(fill = color),\n           color = \"black\",\n           width = .9) +\n  scale_fill_identity() +\n  labs(title = \"Highest-grossing tours of all time\",\n       subtitle = \"(as of 2023)\") +\n  theme(\n    text = element_text(size = 9,\n                        family = \"lato\"),\n    title = element_text(\n      size = 16,\n      family = \"playfair-display\"\n    ),\n    subtitle = element_text(size = 12,\n                            family = \"lato\")\n  ) +\n  geom_text(\n    aes(y = 12000000, label = tour_title),\n    family = \"lato\",\n    hjust = 0,\n    vjust = 0.5,\n    size = 3,\n    color = \"white\",\n    fontface = \"bold\"\n  ) +\n  geom_text(\n    aes(\n      y = 12000000,\n      label = ifelse(artist == \"Taylor Swift\", tour_title, \"\")\n    ),\n    family = \"lato\",\n    hjust = 0,\n    vjust = 0.5,\n    size = 3,\n    color = \"black\",\n    fontface = \"bold\"\n  ) +\n  geom_text(\n    aes(\n      label = scales::dollar(\n        adjusted_gross_in_2022_dollars,\n        accuracy = 1,\n        scale = 1e-6,\n        suffix = \"M\"\n      )\n    ),\n    family = \"lato\",\n    hjust = -0.1,\n    vjust = 0.5,\n    size = 3\n  ) +\n  coord_flip() +\n  scale_y_continuous(limits = c(0, 1500000000)) +\n  theme_void()"
  },
  {
    "objectID": "r.html",
    "href": "r.html",
    "title": "Taylor Swift‚Äôs Tour in the Pantheon of Music",
    "section": "",
    "text": "[to be added]",
    "crumbs": [
      "Want to walk through the code?",
      "üîµ See the code in R"
    ]
  },
  {
    "objectID": "py.html",
    "href": "py.html",
    "title": "Taylor Swift‚Äôs Tour in the Pantheon of Music",
    "section": "",
    "text": "[to be added]",
    "crumbs": [
      "Want to walk through the code?",
      "üêç See the code in Python"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Taylor Swift‚Äôs Tour in the Pantheon of Music",
    "section": "",
    "text": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula. Aliquam sit amet ipsum ut nisl gravida molestie. Morbi orci tortor, dapibus a dictum vitae, congue sit amet lorem. Praesent purus risus, auctor ac neque sed, interdum feugiat erat. Fusce gravida pellentesque lacus, eget sodales elit sodales vitae. Nunc porttitor pulvinar bibendum.\n\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula. Aliquam sit amet ipsum ut nisl gravida molestie. Morbi orci tortor, dapibus a dictum vitae, congue sit amet lorem. Praesent purus risus, auctor ac neque sed, interdum feugiat erat. Fusce gravida pellentesque lacus, eget sodales elit sodales vitae. Nunc porttitor pulvinar bibendum.\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\n\n\n\n\n\n\n\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\n\n\n\n\n\nannual_hi_gross_tours &lt;-\n  ind_html[[9]] |&gt;\n  clean_names()\n\n\nannual_hi_gross_tours_clean &lt;-\n  annual_hi_gross_tours |&gt;\n  dplyr::mutate(across(\n    c(adjusted_gross_in_2022_dollar,\n      actual_gross),\n    ~ as.numeric(str_replace_all(.x, \"[$,]\", \"\"))\n  ),\n  year = lubridate::ymd(year, truncated = 2L),\n  decade = as.factor(floor_date(year, years(10))))\n\n\nannual_hi_gross_tours_clean |&gt;\n  ggplot(aes(\n    x = year,\n    y = adjusted_gross_in_2022_dollar,\n    size =  shows,\n    fill = decade\n  )) +\n  geom_point(alpha = 0.5,\n             shape = 21,\n             color = \"black\") +\n  scale_size(range = c(.1, 8)) +\n  scale_fill_viridis(discrete = TRUE, guide = FALSE, option = \"A\") +\n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  labs(title = \"Annual highest-grossing tours\")"
  },
  {
    "objectID": "index.html#introduction",
    "href": "index.html#introduction",
    "title": "Taylor Swift‚Äôs Tour in the Pantheon of Music",
    "section": "",
    "text": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula. Aliquam sit amet ipsum ut nisl gravida molestie. Morbi orci tortor, dapibus a dictum vitae, congue sit amet lorem. Praesent purus risus, auctor ac neque sed, interdum feugiat erat. Fusce gravida pellentesque lacus, eget sodales elit sodales vitae. Nunc porttitor pulvinar bibendum."
  },
  {
    "objectID": "index.html#the-eras-tour",
    "href": "index.html#the-eras-tour",
    "title": "Taylor Swift‚Äôs Tour in the Pantheon of Music",
    "section": "",
    "text": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula. Aliquam sit amet ipsum ut nisl gravida molestie. Morbi orci tortor, dapibus a dictum vitae, congue sit amet lorem. Praesent purus risus, auctor ac neque sed, interdum feugiat erat. Fusce gravida pellentesque lacus, eget sodales elit sodales vitae. Nunc porttitor pulvinar bibendum.\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\n\n\n\n\n\n\n\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n\n\n\n\n\n\nannual_hi_gross_tours &lt;-\n  ind_html[[9]] |&gt;\n  clean_names()\n\n\nannual_hi_gross_tours_clean &lt;-\n  annual_hi_gross_tours |&gt;\n  dplyr::mutate(across(\n    c(adjusted_gross_in_2022_dollar,\n      actual_gross),\n    ~ as.numeric(str_replace_all(.x, \"[$,]\", \"\"))\n  ),\n  year = lubridate::ymd(year, truncated = 2L),\n  decade = as.factor(floor_date(year, years(10))))\n\n\nannual_hi_gross_tours_clean |&gt;\n  ggplot(aes(\n    x = year,\n    y = adjusted_gross_in_2022_dollar,\n    size =  shows,\n    fill = decade\n  )) +\n  geom_point(alpha = 0.5,\n             shape = 21,\n             color = \"black\") +\n  scale_size(range = c(.1, 8)) +\n  scale_fill_viridis(discrete = TRUE, guide = FALSE, option = \"A\") +\n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  labs(title = \"Annual highest-grossing tours\")"
  },
  {
    "objectID": "notebooks/eras-tour-dates-and-venues.html",
    "href": "notebooks/eras-tour-dates-and-venues.html",
    "title": "",
    "section": "",
    "text": "See R code\n\n\n\n\n\n\n\nThe Eras Tour Dates and Venues\n\n\n\n\n# To clean data\nlibrary(tidyverse)\nlibrary(janitor)\n\n# To scrape data\nlibrary(rvest)\nlibrary(httr)\nlibrary(polite)\n\n# To geocode data\nlibrary(tidygeocoder)\n\n# To visualize data\nlibrary(leaflet)\n\n\nurl_map &lt;-\n  \"https://www.sportskeeda.com/pop-culture/taylor-swift-2023-the-eras-tour-ticket-cities-and-dates\"\n\nurl_map_bow &lt;- polite::bow(url_map)\nurl_map_bow\n\n&lt;polite session&gt; https://www.sportskeeda.com/pop-culture/taylor-swift-2023-the-eras-tour-ticket-cities-and-dates\n    User-agent: polite R package\n    robots.txt: 41 rules are defined for 4 bots\n   Crawl delay: 5 sec\n  The path is scrapable for this user-agent\n\n\n\nmap_html &lt;-\n  polite::scrape(url_map_bow) |&gt;  # scrape web page\n  rvest::html_nodes(\"tbody\") |&gt; # pull out specific table\n  rvest::html_table(fill = TRUE) |&gt;\n  bind_rows() |&gt;\n  row_to_names(row_number = 1) |&gt;\n  clean_names()\n\n\nmap_html_geocode &lt;-\n  map_html |&gt;\n  geocode(venue,\n          method = \"osm\",\n          lat = latitude ,\n          long = longitude)\n\nmap_html_geo &lt;-\n  map_html_geocode |&gt;\n  mutate(\n    latitude = case_when(\n      venue == \"Empower Field at Mile Hi\" ~ 39.74359,\n      venue == \"Johan Cruyff Arena\" ~ 52.3143,\n      .default = latitude\n    ),\n    longitude = case_when(\n      venue == \"Empower Field at Mile Hi\" ~ -105.01968,\n      venue == \"Johan Cruyff Arena\" ~ 4.94187,\n      .default = longitude\n    )\n  ) |&gt;\n  mutate(number_shows = n(),\n         .by = c(venue, city)) |&gt;\n  mutate(occurred = case_when(lubridate::mdy(paste0(date, year)) &lt; today() ~ \"Occurred\",\n                              .default = \"Not Occurred\"))\n\nWarning: There was 1 warning in `mutate()`.\n‚Ñπ In argument: `occurred = case_when(...)`.\nCaused by warning:\n!  24 failed to parse.\n\n\n\npal &lt;- colorFactor(\n  palette = c(\"#823549\", \"#1D1F38\"),\n  domain = map_html_geo$occurred\n)\n\nleaflet() |&gt;\n  addProviderTiles(\"Stadia.AlidadeSmooth\",\n                   options = (noWrap = TRUE)) |&gt;\n  setMaxBounds(\n    lng1 = 180,\n    lat1 = 90,\n    lng2 = -180,\n    lat2 = -90\n  ) |&gt; \n  addCircleMarkers(\n    data = map_html_geo,\n    color = ~pal(occurred),\n    label = paste(\n      \"Venue: \",\n      map_html_geo$venue,\n      \"&lt;br&gt;\",\n      \"City: \",\n      map_html_geo$city,\n      \"&lt;br&gt;\",\n      \"Number of Shows: \",\n      map_html_geo$number_shows\n    ) |&gt;\n      lapply(htmltools::HTML)\n  ) |&gt; \n  addLegend(\"bottomright\", pal = pal, values = map_html_geo$occurred,\n    title = \"Event Status\",\n    opacity = 1\n  )"
  }
]